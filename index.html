<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halaman Profil Anda</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="star-container"></div>

    <div id="sidebar-overlay"></div>

    <nav id="sidebar">
        <div class="sidebar-header-profile">
            <img src="https://api.deline.web.id/ltSnd8k2WI.jpg" alt="Isnpro Market Profile" class="sidebar-profile-pic-large">
            <h4 class="sidebar-market-name">Isnpro market</h4>
        </div>
        
        <hr class="sidebar-divider-top">
        
        <div class="sidebar-label">UTAMA</div>

        <ul class="sidebar-store-menu">
            <li>
                <a href="#" id="isnpro-toggle"> 
                    <img src="https://api.deline.web.id/6Q1QOzDIEN.jpg" alt="Isnpro" class="store-profile-pic">
                    <span>Isnpro store</span>
                    <span class="store-arrow">&gt;</span>
                </a>
                <ul id="isnpro-submenu" class="sidebar-submenu">
                    <li><a href="#" data-page="jualbeli">Sewa bot</a></li>
                    <li><a href="#" data-page="sewabot">Topup game</a></li>
                    <li><a href="#" data-page="hosting">Script bot</a></li>
                </ul>
            </li>
        </ul>

        <hr class="sidebar-divider-section">
        <div class="sidebar-label">LAINNYA</div>

        <ul class="sidebar-store-menu">
            <li>
                <a href="#" id="acc-game-2-toggle"> 
                    <img src="https://files.catbox.moe/jxd8cc.dat" alt="Account" class="store-profile-pic">
                    <span>Account game</span>
                    <span class="store-arrow">&gt;</span>
                </a>
                <ul id="acc-game-2-submenu" class="sidebar-submenu">
                    <li><a href="#" data-page="acc_pubg">Akun roblox</a></li>
                    <li><a href="#" data-page="acc_genshin">Akun mobile legends</a></li>
                    <li><a href="#" data-page="acc_coc">Akun free fire</a></li>
                    <li><a href="#" data-page="acc_val">Akun football</a></li>
                </ul>
            </li>

            <li>
                <a href="#" id="joki-toggle"> 
                    <img src="https://files.catbox.moe/jxd8cc.dat" alt="Joki" class="store-profile-pic">
                    <span>Joki game</span>
                    <span class="store-arrow">&gt;</span>
                </a>
                <ul id="joki-submenu" class="sidebar-submenu">
                    <li><a href="#" data-page="joki_rank">Joki roblox</a></li>
                    <li><a href="#" data-page="joki_classic">Joki rank</a></li>
                    <li><a href="#" data-page="joki_gendong">Joki Gendong</a></li>
                </ul>
            </li>
        </ul>

        <ul class="sidebar-footer-menu">
            <li>
                <a href="#" id="btn-home-l1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-svg"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    <span>Kembali halaman utama</span>
                </a>
            </li>
            <li>
                <a href="#" id="btn-exit-l1">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon-svg"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    <span>Keluar dari website</span>
                </a>
            </li>
        </ul>
    </nav>
    
    <div class="navbar" id="navbar">
        <div class="hamburger-menu">
            <div class="line"></div>
            <div class="line"></div>
            <div class="line"></div>
        </div>
        <div class="nav-title" id="navTitle" style="cursor: pointer;">WEBSITE MARKETPLACE</div>
        <img src="https://api.deline.web.id/ltSnd8k2WI.jpg" alt="Foto Profil" class="nav-profile-pic" id="navbarProfilePic">
    </div>

    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content-container">
            <div class="loading-spinner"></div>
            <img src="https://api.deline.web.id/ltSnd8k2WI.jpg" alt="Foto Profil" class="loading-profile-pic">
        </div>
        <div id="loadingText" class="loading-text">loading</div>
    </div>

    <div id="halamanBaru" class="halaman-baru">
        
        <div id="default-content">
            <h2>welcome to website isnpro</h2>
            
            <img src="https://api.deline.web.id/GrYZebEkp2.jpg" alt="Shop Banner" class="welcome-image">
            
            <p style="margin-top: 15px;">Click <b>garis tiga</b> untuk melihat kategori/produk kami</p>

            <div class="info-section">
                <h3 class="content-subheading">Mengapa harus beli di website kami?</h3>
                <p class="info-text">
                    1. Karena kami amanah <br>
                    2. Kami selalu fast respons <br>
                    3. Pastinya murah murah
                </p>
            </div>

            <div class="info-section">
                <h3 class="content-subheading">bagaimana cara memesan produk?</h3>
                <p class="info-text">
                    1. Pencet garis 3 di kiri atas <br>
                    2. Pilih kategori <br>
                    3. Pilih produk <br>
                    4. Pilih beli sekarang
                </p>
            </div>

        </div>

        <div id="jualbeli-content" class="page-content" style="display: none;">
            <h2>Halaman Jual Akun</h2>
            <p>Selamat datang di halaman jual beli akun utama.</p>
        </div>
        <div id="hosting-content" class="page-content" style="display: none;">
            <h2>Halaman Hosting</h2>
            <p>Silakan pilih paket hosting Anda.</p>
        </div>
        <div id="sewabot-content" class="page-content" style="display: none;">
            <h2>Halaman Sewa Bot</h2>
            <p>Daftar harga sewa bot ada di sini.</p>
        </div>
        
        <div id="acc_pubg-content" class="page-content" style="display: none;"><h2>Akun PUBG</h2><p>Daftar akun PUBG.</p></div>
        <div id="acc_genshin-content" class="page-content" style="display: none;"><h2>Akun Genshin</h2><p>Daftar akun Genshin.</p></div>
        <div id="joki_rank-content" class="page-content" style="display: none;"><h2>Joki Rank</h2><p>Layanan Joki Rank.</p></div>
    </div>

    <script>
        // Variabel Halaman & UI Utama
        var navProfilePic = document.getElementById('navbarProfilePic');
        var loadingOverlay = document.getElementById('loadingOverlay');
        var loadingText = document.getElementById('loadingText');
        var halamanBaru = document.getElementById('halamanBaru');
        var navbar = document.getElementById('navbar');
        var navTitle = document.getElementById('navTitle');
        var allPageContent = document.querySelectorAll('.page-content');
        var defaultContent = document.getElementById('default-content');

        // Variabel Sidebar Utama
        var hamburger = document.querySelector('.hamburger-menu');
        var sidebar = document.getElementById('sidebar');
        var sidebarOverlay = document.getElementById('sidebar-overlay');

        // Variabel Akordeon (Toggle Menu)
        var isnproToggle = document.getElementById('isnpro-toggle');
        var isnproSubmenu = document.getElementById('isnpro-submenu');
        
        var accGame2Toggle = document.getElementById('acc-game-2-toggle');
        var accGame2Submenu = document.getElementById('acc-game-2-submenu');

        var jokiToggle = document.getElementById('joki-toggle');
        var jokiSubmenu = document.getElementById('joki-submenu');

        // Data Toko (Mapping URL)
        const storePageMap = {
            'jualbeli': 'isn',
            'sewabot': 'isn',
            'hosting': 'isn',
            // Kategori Lainnya
            'acc_pubg': 'lainnya',
            'acc_genshin': 'lainnya',
            'acc_coc': 'lainnya',
            'acc_val': 'lainnya',
            // Kategori Joki
            'joki_rank': 'joki',
            'joki_classic': 'joki',
            'joki_gendong': 'joki',
        };

        // Variabel Loading
        var loadingTimeout;
        var textInterval;
        var dotStates = [' .', ' ..', ' ...'];
        var currentState = 0;

        // --- EVENT LISTENERS ---

        navProfilePic.addEventListener('click', function() {
            alert("Welcome di website resmi by Isn_pro x owner, ini web store JB + HOSTING");
        });

        hamburger.addEventListener('click', openSidebar);
        sidebarOverlay.addEventListener('click', closeAllSidebars);

        navTitle.addEventListener('click', function() {
            startLoading(); 
        });
        
        // --- LOGIKA BARU ACCORDION (Satu buka, yang lain tutup) ---

        // 1. Kita kumpulkan semua menu dalam satu list
        const accordionItems = [
            { toggle: isnproToggle, submenu: isnproSubmenu },
            { toggle: accGame2Toggle, submenu: accGame2Submenu },
            { toggle: jokiToggle, submenu: jokiSubmenu }
        ];

        // 2. Fungsi untuk menutup menu tertentu
        function closeAccordionItem(item) {
            if (item.toggle && item.submenu) {
                item.toggle.classList.remove('active');
                item.submenu.style.maxHeight = null;
            }
        }

        // 3. Loop untuk memasang event listener pada setiap menu
        accordionItems.forEach(function(item) {
            if (!item.toggle || !item.submenu) return;

            // Event saat judul menu diklik
            item.toggle.addEventListener('click', function(event) {
                event.preventDefault();
                
                // Cek apakah menu ini sedang terbuka sebelum diklik
                const isAlreadyOpen = this.classList.contains('active');

                // TUTUP SEMUA MENU LEBIH DULU
                accordionItems.forEach(function(otherItem) {
                    closeAccordionItem(otherItem);
                });

                // Jika tadi belum terbuka, maka sekarang kita BUKA
                // (Jika tadi sudah terbuka, biarkan tertutup karena langkah 'TUTUP SEMUA' di atas)
                if (!isAlreadyOpen) {
                    this.classList.add('active');
                    item.submenu.style.maxHeight = item.submenu.scrollHeight + "px";
                }
            });

            // Event saat link di dalam submenu diklik (pindah halaman)
            item.submenu.addEventListener('click', function(event) {
                var linkTarget = event.target.closest('a');
                if (linkTarget && linkTarget.hasAttribute('data-page')) {
                    event.preventDefault();
                    var pageName = linkTarget.getAttribute('data-page');
                    
                    showPage(pageName);
                    closeAllSidebars(); 
                }
            });
        });

        // Listener Tombol Footer 
        document.getElementById('btn-home-l1').addEventListener('click', handleHomeClick);
        document.getElementById('btn-exit-l1').addEventListener('click', handleExitClick);

        // --- FUNGSI-FUNGSI ---

        function openSidebar() {
            sidebar.classList.add('show');
            sidebarOverlay.style.display = 'block';
        }

        function closeAllSidebars() {
            sidebar.classList.remove('show');
            sidebarOverlay.style.display = 'none';

            // Reset SEMUA akordeon saat sidebar ditutup
            const allToggles = [isnproToggle, accGame2Toggle, jokiToggle];
            const allSubmenus = [isnproSubmenu, accGame2Submenu, jokiSubmenu];

            for (let i = 0; i < allToggles.length; i++) {
                if (allToggles[i] && allSubmenus[i]) {
                    allToggles[i].classList.remove('active');
                    allSubmenus[i].style.maxHeight = null;
                }
            }
        }

        function animateLoadingText() {
            currentState = 0;
            loadingText.textContent = 'loading' + dotStates[0]; 
            clearInterval(textInterval); 
            textInterval = setInterval(function() {
                currentState = (currentState + 1) % 3;
                loadingText.textContent = 'loading' + dotStates[currentState];
            }, 600);
        }

        function showPage(pageName) {
            if (loadingTimeout) {
                clearTimeout(loadingTimeout);
            }
            clearInterval(textInterval);
            loadingOverlay.style.display = 'none'; 
            
            halamanBaru.style.display = 'block';
            navbar.classList.add('show');

            allPageContent.forEach(function(page) {
                page.style.display = 'none';
            });
            defaultContent.style.display = 'none';

            let newUrl = 'index.html'; 
            let newTitle = 'Halaman Profil Anda';
            
            var contentId = pageName ? pageName + '-content' : 'default-content';
            var elementToShow = document.getElementById(contentId);

            if (elementToShow && pageName) {
                elementToShow.style.display = 'block';
                
                const storePrefix = storePageMap[pageName] || 'page';
                if (storePrefix) {
                    newUrl = '?' + storePrefix + '=' + pageName;
                }
                
                newTitle = elementToShow.querySelector('h2') ? elementToShow.querySelector('h2').textContent + ' - Profil Anda' : 'Halaman ' + pageName;
            } else {
                // Jika halaman content belum dibuat, kembali ke default
                if(pageName) {
                   console.log("Halaman " + pageName + " belum memiliki konten div.");
                }
                defaultContent.style.display = 'block';
            }

            const currentQuery = window.location.search;
            const targetQuery = newUrl.startsWith('?') ? newUrl : '';
            if (currentQuery !== targetQuery) {
                history.pushState(null, newTitle, newUrl);
            }
            document.title = newTitle;
        }

        function startLoading() {
            clearInterval(textInterval);
            if (loadingTimeout) {
                clearTimeout(loadingTimeout);
            }
            
            loadingOverlay.style.display = 'flex'; 
            animateLoadingText(); 

            loadingTimeout = setTimeout(function() {
                clearInterval(textInterval); 
                loadingOverlay.style.display = 'none';
                
                showPage('default'); 

            }, 3000);
        }

        function handleHomeClick(event) {
            event.preventDefault(); 
            closeAllSidebars();
            startLoading(); 
        }

        function handleExitClick(event) {
            event.preventDefault(); 
            if (confirm("Apakah Anda yakin ingin keluar?")) {
                history.back(); 
            }
        }

        // --- FUNGSI ONLOAD & POPSTATE ---

        window.onload = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const pageIsn = urlParams.get('isn');
            const pageLain = urlParams.get('lainnya');
            const pageJoki = urlParams.get('joki'); 
            const page = pageIsn || pageLain || pageJoki; 

            if (page) {
                sessionStorage.setItem('visitedBefore', 'true'); 
                showPage(page); 
            } else {
                if (sessionStorage.getItem('visitedBefore') === 'true') {
                    showPage('default'); 
                } else {
                    sessionStorage.setItem('visitedBefore', 'true'); 
                    startLoading(); 
                }
            }
        };

        window.onpopstate = function() {
            const urlParams = new URLSearchParams(window.location.search);
            const pageIsn = urlParams.get('isn');
            const pageLain = urlParams.get('lainnya');
            const pageJoki = urlParams.get('joki'); 
            const page = pageIsn || pageLain || pageJoki;
            showPage(page); 
        };

        // --- TAMBAHKAN SCRIPT GENERATOR BINTANG DI SINI ---
        
        function createStars() {
            const starContainer = document.getElementById('star-container');
            const starCount = 10; // Jumlah bintang (jangan terlalu banyak agar tidak lag di HP)

            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.classList.add('star');

                // Posisi Acak
                const x = Math.random() * 100;
                const y = Math.random() * 100;
                
                // Ukuran Acak (Biar terlihat alami, ada yang besar ada yang kecil)
                const size = Math.random() * 2 + 1; // Ukuran antara 1px sampai 3px
                
                // Durasi Kedip Acak (Biar tidak kedip barengan)
                const duration = Math.random() * 3 + 2; // Antara 2 sampai 5 detik
                const delay = Math.random() * 5; 

                star.style.left = `${x}%`;
                star.style.top = `${y}%`;
                star.style.width = `${size}px`;
                star.style.height = `${size}px`;
                star.style.animationDuration = `${duration}s`;
                star.style.animationDelay = `${delay}s`;

                starContainer.appendChild(star);
            }
        }

        // Jalankan fungsi saat website dimuat
        createStars();
        
    </script>
</body>
</html>
